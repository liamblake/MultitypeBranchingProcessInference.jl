env:
  blas_num_threads: 1

model:
  stateprocess:
    params:
      E_state_count: 1
      I_state_count: 1
      timestamps: [0.0, 7.0, 10.0, 13.0, 16.0, 19.0, 22.0, 25.0, 28.0, 31.0]
      R_0: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0] # Reproduction number
      T_E: [2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0] # Mean time in E
      T_I: [0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6] # Mean time in I
      T_D: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0] # Mean time between count and notification
      observation_probability: 1.0
      immigration_rate: [0.0, 0.0]
    # [E, I, O, N, R]
    initial_state: [5, 0, 0, 0, 0]
  observation:
    mean: [0.0]
    cov: [1.0]

inference:
  data:
    filename: data/flu2009_incidence.csv
    first_observation_time: 1.0
  likelihood_approx:
    method: kalman_filter
    switch:
      threshold: 20
      seed: 1516171819
    particle_filter:
      seed: 67890
      nparticles: 256
      multithreaded: false
  parameters: ["R_0"] # Parameters to estimate - others are assumed fixed using model config
  prior_parameters:
    R_0:
      type: gaussian_processes
      covariance_function: exponential
      mu: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
      ell: 136.47008022356596
      sigma: 0.7
      transform: log
  proposal_parameters:
    mean: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]
    cov: [0.04816648751750987, 0.015267695341575191, 0.005802639059734916, 0.0022428197638656422, 0.0012697835220295474, 0.0010456307572775808, 0.0007969816214013683, 0.0007109652492677076, 0.0006179676809920338, 0.0005531764348882642, 0.015267695341575191, 0.030890838200189147, 0.01244828968684915, 0.005526786447418273, 0.0037503561608003, 0.0028331554008023648, 0.0022340309632719294, 0.002040539690542272, 0.0018853892971549774, 0.0017074820762724493, 0.005802639059734916, 0.01244828968684915, 0.02079938796371419, 0.009555225499310187, 0.006776596689346379, 0.005349759988348393, 0.004542687306300478, 0.004160007550679259, 0.0037286997719907424, 0.0035458452751617043, 0.0022428197638656422, 0.005526786447418273, 0.009555225499310187, 0.019160357405035668, 0.013547279328706911, 0.011069308616075376, 0.009939325664913738, 0.009311046755308328, 0.008981203829620539, 0.008788844906425388, 0.0012697835220295474, 0.0037503561608003, 0.006776596689346379, 0.013547279328706911, 0.022685398859635005, 0.018682141685889653, 0.016851607762105987, 0.015766954982038277, 0.015196846744811646, 0.014942881356010134, 0.0010456307572775808, 0.0028331554008023648, 0.005349759988348393, 0.011069308616075376, 0.018682141685889653, 0.027147728366857374, 0.02448024906155076, 0.02291745364059273, 0.022174842956145347, 0.022041096141653158, 0.0007969816214013683, 0.0022340309632719294, 0.004542687306300478, 0.009939325664913738, 0.016851607762105987, 0.02448024906155076, 0.03364831914259614, 0.031382502023634504, 0.030378880691562634, 0.03034147204303265, 0.0007109652492677076, 0.002040539690542272, 0.004160007550679259, 0.009311046755308328, 0.015766954982038277, 0.02291745364059273, 0.031382502023634504, 0.040932793880782456, 0.03960627114576818, 0.039453463317432595, 0.0006179676809920338, 0.0018853892971549774, 0.0037286997719907424, 0.008981203829620539, 0.015196846744811646, 0.022174842956145347, 0.030378880691562634, 0.03960627114576818, 0.050936436643596913, 0.050598611075832134, 0.0005531764348882642, 0.0017074820762724493, 0.0035458452751617043, 0.008788844906425388, 0.014942881356010134, 0.022041096141653158, 0.03034147204303265, 0.039453463317432595, 0.050598611075832134, 0.06345990841661141]
  mh_config:
    seed: 1011121314
    buffer_size: 16384
    outfilename: data/seird_flu2009_kalman_param_samples.f64_array.bin
    max_iters: 831072
    nparams: 10
    max_time_sec: 1500.0 #604800.0 # 1 week!
    init_sample: [1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]
    verbose: true
    infofilename: data/seird_flu2009_kalman.info.txt
    adaptive: true
    nadapt: 10000 #131072
    adapt_cov_scale: 0.34
    continue: false